{"version":3,"file":"static/js/284.67663692.chunk.js","mappings":"+OAaMA,EAAaC,EAAAA,EAAAA,IAAW,CAC5BC,UAAW,UAGPC,EAAaF,EAAAA,EAAAA,MAAa,CAC9BG,MAAO,QACPC,QAAS,MACTC,OAAQ,+BACRC,aAAc,SAGVC,EAAcP,EAAAA,EAAAA,OAAc,CAChCI,QAAS,MACTC,OAAQ,+BACR,UAAW,CAAEG,OAAQ,aAGR,SAASC,EAAUC,GAChC,IAAIC,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MACb,GAAsCC,EAAAA,EAAAA,MAAtC,eAAKC,EAAL,KAAmBC,EAAnB,KAEA,GAAwBC,EAAAA,EAAAA,UAAS,MAAjC,eAAOC,EAAP,KAAaC,EAAb,KACMC,GAAaC,EAAAA,EAAAA,QAAO,OAC1BC,EAAAA,EAAAA,YAAU,WACR,IAAIC,EAAkB,IAAIC,gBACtBN,EAAOH,EAAaU,IAAI,SAC5B,GAAKP,EAKL,OAJAQ,EAAAA,EAAAA,YAAgB,eAAgBH,EAAiBL,GAAMS,MAAK,SAACC,GAC3DT,EAAQS,EAASC,QAClB,IAEM,kBAAMN,EAAgBO,OAAtB,CACR,GAAE,CAACf,EAAaU,IAAI,WAYrB,OACE,SAAC,IAAD,WACE,UAAC3B,EAAD,YACE,mBACEiC,UAAU,cACVC,QAAS,WACPtB,GAAU,EACX,EAJH,sBAQEE,EAAOqB,UACP,4BACE,kBACEC,SAxBS,SAACC,GACpBA,EAAMC,iBACN,IAAIC,EAAQjB,EAAWkB,QAAQC,MAE7BvB,EADEqB,EACc,CAAEA,MAAAA,GAEF,CAAC,EAEpB,EAiBWE,MAAOxB,EAAaU,IAAI,UAAY,GAFtC,WAIE,SAACxB,EAAD,CAAYuC,KAAK,OAAOC,IAAKrB,KAC7B,SAACd,EAAD,CAAakC,KAAK,SAAlB,wBAEF,0BACE,wBACGtB,GACCA,EAAKwB,KAAI,SAACC,GAAD,OACP,yBACE,SAAC,KAAD,CAAMC,GAAI,UAAYD,EAAQE,GAA9B,SAAmCF,EAAQG,SADpCH,EAAQE,GADV,WASlBjC,EAAOqB,UAAW,SAAC,KAAD,QAI1B,C,mBC9FD,IAAMc,EAAM,mCAgBNrB,EAAM,CACVsB,YAfkB,SAACC,EAAQ1B,GAAiC,IAAhBc,EAAe,uDAAP,GACpD,MAAiB,KAAVA,EACHa,MAAM,gCAAD,OAAiCD,EAAjC,oBAAmDF,GAAO,CAC7DI,OAAQ5B,EAAgB4B,SACvBxB,MAAK,SAAAC,GACN,OAAOA,EAASwB,MACjB,IACDF,MAAM,gCAAD,OAAiCD,EAAjC,oBAAmDF,EAAnD,kBAAgEV,GAAS,CAC5Ec,OAAQ5B,EAAgB4B,SACvBxB,MAAK,SAAAC,GACN,OAAOA,EAASwB,MACjB,GACN,GAMD,K","sources":["components/MoviesPage.js","services/api.js"],"sourcesContent":["import {\r\n  Outlet,\r\n  useNavigate,\r\n  useParams,\r\n  useSearchParams,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport api from \"../services/api\";\r\nimport styled from \"@emotion/styled\";\r\nimport \"../App.css\";\r\n\r\nconst FancyMovie = styled.div({\r\n  textAlign: \"start\",\r\n});\r\n\r\nconst FancyInput = styled.input({\r\n  width: \"300px\",\r\n  padding: \"5px\",\r\n  border: \"1px solid rgb(219, 215, 215)\",\r\n  outlineColor: \"blue\",\r\n});\r\n\r\nconst FancyButton = styled.button({\r\n  padding: \"5px\",\r\n  border: \"1px solid rgb(219, 215, 215)\",\r\n  \"&:hover\": { cursor: \"pointer\" },\r\n});\r\n\r\nexport default function MoviePage(props) {\r\n  let navigate = useNavigate();\r\n  let params = useParams();\r\n  let [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  const [data, setData] = useState(null);\r\n  const elementRef = useRef(null);\r\n  useEffect(() => {\r\n    let abortController = new AbortController();\r\n    let data = searchParams.get(\"query\");\r\n    if (!data) return;\r\n    api.fetchMovies(\"search/movie\", abortController, data).then((response) => {\r\n      setData(response.results);\r\n    });\r\n\r\n    return () => abortController.abort();\r\n  }, [searchParams.get(\"query\")]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    let query = elementRef.current.value;\r\n    if (query) {\r\n      setSearchParams({ query });\r\n    } else {\r\n      setSearchParams({});\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <FancyMovie>\r\n        <button\r\n          className=\"back-button\"\r\n          onClick={() => {\r\n            navigate(-1);\r\n          }}\r\n        >\r\n          Go back\r\n        </button>\r\n        {!params.movieId && (\r\n          <div>\r\n            <form\r\n              onSubmit={handleSubmit}\r\n              value={searchParams.get(\"query\") || \"\"}\r\n            >\r\n              <FancyInput type=\"text\" ref={elementRef}></FancyInput>\r\n              <FancyButton type=\"submit\">Search</FancyButton>\r\n            </form>\r\n            <div>\r\n              <ul>\r\n                {data &&\r\n                  data.map((element) => (\r\n                    <li key={element.id}>\r\n                      <Link to={\"/movie/\" + element.id}>{element.title}</Link>\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {params.movieId && <Outlet />}\r\n      </FancyMovie>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n","const KEY = 'b8d87910aac56b00d09e566d900045a1';\r\n\r\nconst fetchMovies = (ending, abortController, query = '') => {\r\n  return query === ''\r\n    ? fetch(`https://api.themoviedb.org/3/${ending}?api_key=${KEY}`, {\r\n        signal: abortController.signal,\r\n      }).then(response => {\r\n        return response.json();\r\n      })\r\n    : fetch(`https://api.themoviedb.org/3/${ending}?api_key=${KEY}&query=${query}`, {\r\n        signal: abortController.signal,\r\n      }).then(response => {\r\n        return response.json();\r\n      });\r\n};\r\n\r\nconst api = {\r\n  fetchMovies,\r\n};\r\n\r\nexport default api;\r\n"],"names":["FancyMovie","styled","textAlign","FancyInput","width","padding","border","outlineColor","FancyButton","cursor","MoviePage","props","navigate","useNavigate","params","useParams","useSearchParams","searchParams","setSearchParams","useState","data","setData","elementRef","useRef","useEffect","abortController","AbortController","get","api","then","response","results","abort","className","onClick","movieId","onSubmit","event","preventDefault","query","current","value","type","ref","map","element","to","id","title","KEY","fetchMovies","ending","fetch","signal","json"],"sourceRoot":""}